/**
 * Performance Optimization Styles
 * Critical CSS and performance-focused styles
 */

/* Critical Above-the-fold Styles */
.critical-css {
  /* These styles should be inlined in production */
}

/* Font Loading Optimizations */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Noto Sans Lao';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('https://fonts.gstatic.com/s/notosanslao/v30/bx6lNx2Ol_ixgdYWLm9BwxM3NW6BOkuf763Clj73CiQ_J1Djx9pidOt4ccbdf5MK3riB2g.woff2') format('woff2');
  unicode-range: U+0E80-0EFF;
}

/* Font Fallback Styles */
.font-fallback {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif !important;
}

.font-fallback :lang(lo) {
  font-family: 'Phetsarath OT', 'Saysettha OT', sans-serif !important;
}

/* Image Optimization Styles */
.optimized-image {
  background-color: var(--card);
  background-image: linear-gradient(45deg, transparent 40%, rgba(77, 163, 255, 0.05) 50%, transparent 60%);
  background-size: 20px 20px;
  transition: opacity 0.3s ease-in-out;
}

.optimized-image:not(.loaded) {
  opacity: 0.7;
}

.optimized-image.loaded {
  opacity: 1;
  background-image: none;
}

/* WebP/AVIF Support Indicators */
.webp-support .webp-fallback {
  display: none;
}

.avif-support .avif-fallback {
  display: none;
}

/* Low Bandwidth Mode */
.low-bandwidth * {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

.low-bandwidth img {
  filter: contrast(0.8) brightness(0.9);
}

.low-bandwidth .parallax-y {
  transform: none !important;
}

/* Performance-focused Layout Styles */
.perf-container {
  contain: layout style paint;
}

.perf-grid {
  contain: layout;
  will-change: auto;
}

/* Critical Resource Loading States */
.loading-fonts {
  visibility: hidden;
}

.fonts-loaded .loading-fonts {
  visibility: visible;
}

/* Intersection Observer Fallbacks */
.no-intersection-observer .reveal-up {
  opacity: 1 !important;
  transform: none !important;
}

/* GSAP Fallback Animations */
.no-gsap .reveal-up {
  opacity: 1 !important;
  transform: none !important;
  animation: revealUpFallback 0.6s ease-out;
}

.no-gsap .parallax-y {
  will-change: auto !important;
  transform: none !important;
}

@keyframes revealUpFallback {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Reduced Motion Optimizations */
@media (prefers-reduced-motion: reduce) {
  .reduced-motion *,
  .reduced-motion *::before,
  .reduced-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .reduced-motion .reveal-up {
    opacity: 1 !important;
    transform: none !important;
  }

  .reduced-motion .parallax-y {
    will-change: auto !important;
    transform: none !important;
  }
}

/* Performance Monitoring Styles */
.perf-monitor {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 10px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 12px;
  z-index: 9999;
  display: none;
}

.perf-monitor.show {
  display: block;
}

/* Critical Path Optimization */
.above-fold {
  /* Styles for above-the-fold content */
  contain: layout style paint;
}

.below-fold {
  /* Styles for below-the-fold content */
  content-visibility: auto;
  contain-intrinsic-size: 0 500px;
}

/* Resource Hints Styles */
.preload-hint::before {
  content: '';
  display: none;
  /* Removed placeholder-project.jpg reference to prevent 404 errors */
}

/* Error State Styles */
.resource-error {
  background-color: rgba(220, 53, 69, 0.1);
  border: 1px solid rgba(220, 53, 69, 0.3);
  color: #dc3545;
  padding: 1rem;
  border-radius: 4px;
  text-align: center;
}

.resource-error::before {
  content: '⚠️ ';
}

/* Loading State Optimizations */
.skeleton-loader {
  background: linear-gradient(90deg, var(--card) 25%, var(--card-hover) 50%, var(--card) 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Network-aware Styles */
@media (max-width: 768px) and (max-resolution: 1dppx) {
  /* Low-resolution mobile optimizations */
  .high-res-only {
    display: none;
  }
}

/* Print Optimizations */
@media print {
  .no-print {
    display: none !important;
  }
  
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  a[href]:after {
    content: " (" attr(href) ")";
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .optimized-image {
    filter: contrast(1.2);
  }
  
  .skeleton-loader {
    background: repeating-linear-gradient(
      90deg,
      transparent,
      transparent 10px,
      currentColor 10px,
      currentColor 11px
    );
  }
}

/* Memory Usage Optimization */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
}

.cpu-optimized {
  will-change: auto;
  transform: none;
}

/* Content Visibility Optimization */
.lazy-section {
  content-visibility: auto;
  contain-intrinsic-size: 0 400px;
}

/* Performance Budget Warnings (Development Only) */
.dev-warning {
  position: fixed;
  bottom: 10px;
  left: 10px;
  background: #ff6b6b;
  color: white;
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 12px;
  z-index: 9999;
  display: none;
}

.dev-warning.show {
  display: block;
}