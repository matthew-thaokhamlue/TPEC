<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self';">
    
    <title data-i18n="meta.projects.title">Projects - Construction Consulting</title>
    <meta name="description" data-i18n="meta.projects.description" content="Explore our construction consulting projects and case studies">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://example.com/projects.html">
    <meta property="og:title" data-i18n="meta.projects.og_title" content="Projects - Construction Consulting">
    <meta property="og:description" data-i18n="meta.projects.og_description" content="Explore our construction consulting projects and case studies">
    <meta property="og:image" content="https://example.com/assets/img/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Construction Consulting Project Portfolio">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="lo_LA">
    <meta property="og:site_name" content="Construction Consulting Services">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://example.com/projects.html">
    <meta property="twitter:title" data-i18n="meta.projects.twitter_title" content="Projects - Construction Consulting">
    <meta property="twitter:description" data-i18n="meta.projects.twitter_description" content="Explore our construction consulting projects and case studies">
    <meta property="twitter:image" content="https://example.com/assets/img/og-image.jpg">
    <meta property="twitter:image:alt" content="Construction Consulting Project Portfolio">
    
    <!-- Hreflang -->
    <link rel="alternate" hreflang="en" href="https://example.com/projects.html">
    <link rel="alternate" hreflang="lo" href="https://example.com/projects.html">
    
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    
    <!-- Font Preloading -->
    <link rel="preload" href="https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="https://fonts.gstatic.com/s/notosanslao/v30/bx6lNx2Ol_ixgdYWLm9BwxM3NW6BOkuf763Clj73CiQ_J1Djx9pidOt4ccbdf5MK3riB2g.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Lao:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/tokens.css">
    <link rel="stylesheet" href="assets/css/main.css">

    <!-- Scripts -->
    <script src="assets/js/i18n.js"></script>
    <style>
        /* Additional project-specific styles to ensure proper functionality */
        .tab-controls {
            display: flex;
            justify-content: center;
            gap: var(--space-sm, 8px);
            margin-bottom: 0;
            padding: 0;
        }

        .tab-btn {
            background: var(--card, #1a1d23);
            border: 1px solid var(--line, #2a2d35);
            color: var(--text-muted, #9ca3af);
            padding: var(--space-md, 12px) var(--space-xl, 24px);
            border-radius: var(--radius, 6px);
            font-size: var(--font-size-base, 16px);
            font-weight: var(--font-weight-medium, 500);
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 120px;
        }

        .tab-btn:hover {
            background: var(--card-hover, #22252c);
            border-color: var(--accent, #4da3ff);
            color: var(--text, #ffffff);
        }

        .tab-btn.active {
            background: var(--accent, #4da3ff);
            border-color: var(--accent, #4da3ff);
            color: var(--bg, #0e1116);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: grid;
            gap: var(--space-2xl, 32px);
            grid-template-columns: 1fr;
        }

        @media (min-width: 768px) {
            .tab-content.active {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .tab-content.active {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .project-card {
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--card, #1a1d23);
            border: 1px solid var(--line, #2a2d35);
            border-radius: var(--radius-lg, 12px);
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .project-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            background: var(--card-hover, #22252c);
            border-color: var(--accent, #4da3ff);
        }

        .project-avatar {
            width: 100%;
            height: 200px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .project-photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .project-info {
            padding: var(--space-xl, 24px);
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .project-name {
            font-size: var(--font-size-lg, 18px);
            font-weight: var(--font-weight-semibold, 600);
            margin-bottom: var(--space-sm, 8px);
            color: var(--text, #ffffff);
        }

        .project-scope {
            font-size: var(--font-size-sm, 14px);
            color: var(--accent, #4da3ff);
            font-weight: var(--font-weight-medium, 500);
            margin-bottom: var(--space-md, 16px);
        }

        .project-summary {
            color: var(--text-muted, #9ca3af);
            margin-bottom: var(--space-md, 16px);
            flex: 1;
            line-height: 1.6;
            font-size: var(--font-size-sm, 14px);
        }

        .project-details {
            margin-top: auto;
        }

        .project-details p {
            font-size: var(--font-size-sm, 14px);
            color: var(--text-muted, #9ca3af);
            margin-bottom: var(--space-xs, 4px);
        }

        .project-location, .project-duration, .project-budget, .project-client {
            font-size: var(--font-size-sm, 14px);
            color: var(--text-muted, #9ca3af);
            margin-bottom: var(--space-xs, 4px);
        }

        .empty-state, .error-message {
            text-align: center;
            padding: var(--space-4xl, 64px);
            color: var(--text-muted, #9ca3af);
            grid-column: 1 / -1;
        }

        .loading {
            text-align: center;
            padding: var(--space-4xl, 64px);
            color: var(--text-muted, #9ca3af);
            grid-column: 1 / -1;
        }

        /* Project Modal Styles */
        .project-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .project-modal.visible {
            opacity: 1;
            visibility: visible;
        }

        .project-modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
        }

        .project-modal-content {
            position: relative;
            background: var(--card, #1a1d23);
            border: 1px solid var(--line, #2a2d35);
            border-radius: var(--radius-lg, 12px);
            max-width: 800px;
            max-height: 90vh;
            width: 90%;
            overflow-y: auto;
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s ease;
        }

        .project-modal.visible .project-modal-content {
            transform: scale(1) translateY(0);
        }

        .project-modal-close {
            position: absolute;
            top: var(--space-md, 16px);
            right: var(--space-md, 16px);
            background: var(--card-hover, #22252c);
            border: 1px solid var(--line, #2a2d35);
            color: var(--text-muted, #9ca3af);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            line-height: 1;
            transition: all 0.2s ease;
            z-index: 10001;
        }

        .project-modal-close:hover {
            background: var(--accent, #4da3ff);
            color: var(--bg, #0e1116);
            border-color: var(--accent, #4da3ff);
        }

        .project-modal-body {
            padding: var(--space-2xl, 32px);
        }

        .project-modal-header {
            margin-bottom: var(--space-xl, 24px);
        }

        .project-modal-title {
            font-size: var(--font-size-2xl, 24px);
            font-weight: var(--font-weight-bold, 700);
            color: var(--text, #ffffff);
            margin-bottom: var(--space-sm, 8px);
        }

        .project-modal-meta {
            display: flex;
            gap: var(--space-lg, 20px);
            margin-bottom: var(--space-md, 16px);
            font-size: var(--font-size-sm, 14px);
            color: var(--text-muted, #9ca3af);
        }

        .project-modal-scope {
            color: var(--accent, #4da3ff);
            font-weight: var(--font-weight-medium, 500);
            font-size: var(--font-size-base, 16px);
        }

        .project-modal-image {
            width: 100%;
            height: 300px;
            border-radius: var(--radius, 6px);
            overflow: hidden;
            margin-bottom: var(--space-xl, 24px);
        }

        .project-modal-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .project-modal-description {
            color: var(--text, #ffffff);
            line-height: 1.6;
            margin-bottom: var(--space-xl, 24px);
        }

        .project-modal-details {
            display: grid;
            gap: var(--space-lg, 20px);
        }

        .project-modal-section {
            background: var(--bg, #0e1116);
            border: 1px solid var(--line, #2a2d35);
            border-radius: var(--radius, 6px);
            padding: var(--space-lg, 20px);
        }

        .project-modal-section h4 {
            color: var(--text, #ffffff);
            font-weight: var(--font-weight-semibold, 600);
            margin-bottom: var(--space-md, 16px);
        }

        .project-modal-section p,
        .project-modal-section ul {
            color: var(--text-muted, #9ca3af);
            line-height: 1.6;
        }

        .project-modal-section ul {
            padding-left: var(--space-lg, 20px);
        }

        .project-modal-section li {
            margin-bottom: var(--space-sm, 8px);
        }

        @media (max-width: 768px) {
            .project-modal-content {
                width: 95%;
                max-height: 95vh;
            }

            .project-modal-body {
                padding: var(--space-lg, 20px);
            }

            .project-modal-meta {
                flex-direction: column;
                gap: var(--space-sm, 8px);
            }

            .project-modal-image {
                height: 200px;
            }
        }
    </style>
    
    <!-- Favicon and Touch Icons -->
    <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/icons/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/icons/android-chrome-512x512.png">
    <link rel="manifest" href="assets/icons/site.webmanifest">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CollectionPage",
      "name": "Construction Consulting Projects",
      "description": "Portfolio of successful construction consulting projects across commercial, residential, infrastructure, and industrial sectors in Laos.",
      "url": "https://example.com/projects.html",
      "mainEntity": {
        "@type": "ItemList",
        "name": "Construction Projects Portfolio",
        "itemListElement": [
          {
            "@type": "CreativeWork",
            "name": "Vientiane Commercial Complex",
            "description": "Comprehensive consulting for a modern commercial complex in central Vientiane, including feasibility studies, regulatory compliance, and construction oversight.",
            "dateCompleted": "2023",
            "location": {
              "@type": "Place",
              "name": "Vientiane, Laos"
            },
            "creator": {
              "@type": "Organization",
              "name": "Construction Consulting Services"
            }
          },
          {
            "@type": "CreativeWork",
            "name": "Luang Prabang Eco Resort",
            "description": "Sustainable tourism infrastructure development for an eco-friendly resort, focusing on environmental impact minimization and cultural preservation.",
            "dateCreated": "2024",
            "location": {
              "@type": "Place",
              "name": "Luang Prabang, Laos"
            },
            "creator": {
              "@type": "Organization",
              "name": "Construction Consulting Services"
            }
          },
          {
            "@type": "CreativeWork",
            "name": "Savannakhet Industrial Park",
            "description": "Industrial park development consulting, including infrastructure planning, environmental assessments, and regulatory approvals for manufacturing facilities.",
            "dateCompleted": "2022",
            "location": {
              "@type": "Place",
              "name": "Savannakhet, Laos"
            },
            "creator": {
              "@type": "Organization",
              "name": "Construction Consulting Services"
            }
          }
        ]
      }
    }
    </script>
</head>
<body>
    <a href="#main" class="skip-link" data-i18n="accessibility.skip_to_content">Skip to main content</a>
    
    <header id="header" role="banner">
        <div class="container">
            <div class="header-content">
                <a href="/TPEC/" class="logo" data-i18n="nav.logo">TPEC Engineering Consultant</a>
                <nav class="nav">
                    <ul class="nav-list">
                        <li><a href="/TPEC/" class="nav-link" data-i18n="nav.home">Home</a></li>
                        <li><a href="/TPEC/about.html" class="nav-link" data-i18n="nav.about">About Us</a></li>
                        <li><a href="/TPEC/projects.html" class="nav-link active" data-i18n="nav.projects">Projects</a></li>
                        <li><a href="/TPEC/contact.html" class="nav-link" data-i18n="nav.contact">Contact</a></li>
                    </ul>
                </nav>
                <div class="language-switcher">
                    <button class="lang-option active" data-lang="en" aria-label="Switch to English">
                        <span class="lang-code">EN</span>
                        <span class="lang-name">English</span>
                    </button>
                    <button class="lang-option" data-lang="lo" aria-label="Switch to Lao">
                        <span class="lang-code">ລາວ</span>
                        <span class="lang-name">ລາວ</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main id="main" role="main">
        <!-- Page Header -->
        <section class="page-header section" aria-labelledby="page-title">
            <div class="container">
                <h1 id="page-title" class="reveal-up" data-i18n="projects.heading">Our Projects</h1>
                <p class="reveal-up" data-i18n="projects.subheading">Explore our portfolio of successful construction consulting projects</p>
            </div>
        </section>

        <!-- Project Tabs -->
        <section class="projects-tabs section" aria-labelledby="project-tabs-title">
            <div class="container">
                <h2 id="project-tabs-title" class="sr-only">Project Categories</h2>
                <div class="tab-controls reveal-up" role="tablist" aria-label="Project status filter">
                    <button class="tab-btn" data-tab="ongoing" data-i18n="projects.tabs.ongoing" role="tab" aria-selected="false" aria-controls="ongoing-projects" id="tab-ongoing">Ongoing</button>
                    <button class="tab-btn active" data-tab="completed" data-i18n="projects.tabs.completed" role="tab" aria-selected="true" aria-controls="completed-projects" id="tab-completed">Completed</button>
                </div>
            </div>
        </section>

        <!-- Projects Grid -->
        <section class="projects-grid-section section" aria-labelledby="projects-grid-title">
            <div class="container">
                <h2 id="projects-grid-title" class="sr-only">Project Portfolio</h2>
                <div id="ongoing-projects" class="projects-grid tab-content reveal-up" role="tabpanel" aria-labelledby="tab-ongoing" aria-label="Ongoing construction projects" aria-hidden="true">
                    <!-- No ongoing projects currently -->
                    <div class="no-projects">
                        <p data-i18n="projects.no_ongoing">No ongoing projects at this time.</p>
                    </div>
                </div>
                <div id="completed-projects" class="projects-grid tab-content active reveal-up" role="tabpanel" aria-labelledby="tab-completed" aria-label="Completed construction projects">
                    <!-- Project Cards with Team Card Style -->


                </div>
            </div>
        </section>

        <!-- Project Detail Modal -->
        <div id="project-modal" class="project-modal hidden" role="dialog" aria-modal="true" aria-labelledby="project-modal-title" aria-hidden="true">
            <div class="project-modal-overlay"></div>
            <div class="project-modal-content">
                <button class="project-modal-close" aria-label="Close project details">&times;</button>
                <div class="project-modal-body">
                    <!-- Project detail content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <footer id="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4 data-i18n="footer.company.title">TPEC Engineering Consultant</h4>
                    <p data-i18n="footer.company.description">Expert public works engineering consulting in Laos. Professional guidance for infrastructure development projects with over 30 years of experience.</p>
                </div>
                <div class="footer-section">
                    <h4 data-i18n="footer.links.title">Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="/TPEC/" data-i18n="nav.home">Home</a></li>
                        <li><a href="/TPEC/about.html" data-i18n="nav.about">About Us</a></li>
                        <li><a href="/TPEC/projects.html" data-i18n="nav.projects">Projects</a></li>
                        <li><a href="/TPEC/contact.html" data-i18n="nav.contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-i18n="footer.contact.title">Contact Information</h4>
                    <ul class="footer-links">
                        <li><a href="tel:021732131" data-i18n="contact.info.phone">021 732131, 020 55526224, 020 28778770, 020 91959555</a></li>
                        <li><a href="mailto:thephachanhtoto@hotmail.com" data-i18n="contact.info.email">thephachanhtoto@hotmail.com</a></li>
                        <li data-i18n="contact.info.address">Phokham Village, Xaythany District, Road No.13 South, Vientiane Capital, Lao PDR</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-i18n="footer.copyright">&copy; 2025 TPEC. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Simplified Projects Page Script -->
    <script>
        let projectModal = null;

        // Create project card with team card structure
        function createProjectCard(projectSlug, projectData) {
            const card = document.createElement('article');
            card.className = 'project-card card reveal-up';
            card.setAttribute('data-project', projectSlug);
            card.setAttribute('tabindex', '0');
            card.setAttribute('role', 'button');

            const lang = i18n.getCurrentLang();
            const getTranslated = (key) => {
                const loKey = `${key}_lo`;
                return lang === 'lo' && projectData[loKey] ? projectData[loKey] : projectData[key];
            };

            const title = getTranslated('title');
            card.setAttribute('aria-label', `View details for ${title}`);

            card.innerHTML = `
                <div class="project-avatar">
                    <img src="${projectData.cover}" alt="${title}" class="project-photo" loading="lazy">
                </div>
                <div class="project-info">
                    <h3 class="project-name">${title}</h3>
                    <p class="project-scope">${getTranslated('scope')}</p>
                    <p class="project-summary">${getTranslated('short_summary')}</p>
                    <div class="project-details">
                        <p class="project-location">📍 ${getTranslated('location')}</p>
                        <p class="project-duration">⏱️ ${getTranslated('duration')}</p>
                        <p class="project-budget">💰 ${getTranslated('value')}</p>
                        <p class="project-client">🏢 ${getTranslated('client')}</p>
                    </div>
                </div>
            `;

            // Add click handler to open modal
            const handleClick = () => {
                showProjectModal(projectSlug);
            };

            card.addEventListener('click', handleClick);
            card.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    handleClick();
                }
            });

            return card;
        }

        // Function to render projects
        function renderProjects() {
            const completedProjectsGrid = document.getElementById('completed-projects');
            if (completedProjectsGrid) {
                // Clear existing content
                completedProjectsGrid.innerHTML = '';

                // Add project cards
                Object.keys(projectsData).forEach(projectSlug => {
                    const projectCard = createProjectCard(projectSlug, projectsData[projectSlug]);
                    completedProjectsGrid.appendChild(projectCard);
                });
            }
        }

        // Initialize page when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Projects page loaded with team card style');

            // Initialize i18n
            i18n.init().then(() => {
                // Initialize modal
                projectModal = document.getElementById('project-modal');

                // Setup tabs
                setupTabs();

                // Setup modal events
                setupModalEvents();

                // Initial render of projects
                renderProjects();

                // Listen for language changes
                window.addEventListener('languageChanged', () => {
                    console.log('Language changed, re-rendering projects...');
                    renderProjects();
                });

                console.log('✅ Projects functionality initialized with team card styling');
            });
        });

        function setupTabs() {
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            console.log('Found', tabButtons.length, 'tab buttons and', tabContents.length, 'tab contents');

            tabButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Tab clicked:', this.getAttribute('data-tab'));
                    
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Update buttons
                    tabButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-selected', 'false');
                    });
                    this.classList.add('active');
                    this.setAttribute('aria-selected', 'true');
                    
                    // Update content
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        content.setAttribute('aria-hidden', 'true');
                        if (content.id === `${targetTab}-projects`) {
                            content.classList.add('active');
                            content.setAttribute('aria-hidden', 'false');
                            console.log('Activated tab content:', content.id);
                        }
                    });
                });
            });
        }

        function setupModalEvents() {
            if (!projectModal) return;

            console.log('🔧 Setting up modal events');

            // Close modal when clicking overlay
            const overlay = projectModal.querySelector('.project-modal-overlay');
            if (overlay) {
                overlay.addEventListener('click', closeProjectModal);
            }

            // Close modal when clicking close button
            const closeBtn = projectModal.querySelector('.project-modal-close');
            if (closeBtn) {
                closeBtn.addEventListener('click', closeProjectModal);
            }

            // Close modal with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && projectModal && !projectModal.classList.contains('hidden')) {
                    closeProjectModal();
                }
            });

            // Setup project detail buttons
            const detailButtons = document.querySelectorAll('.project-details-btn');
            detailButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const projectCard = this.closest('.project-card');
                    const projectSlug = projectCard.getAttribute('data-project');
                    console.log('🔍 Opening project details for:', projectSlug);
                    showProjectModal(projectSlug);
                });
            });
        }

        // Hardcoded project data for modal display
        const projectsData = {
            'national-road-1e-lot1': {
                title: 'National Road 1E Construction Project (Lot I)',
                title_lo: 'ໂຄງການກໍ່ສ້າງផ្លូវជាតិເລກທີ 1E (ຕອນທີ I)',
                location: 'Bolikhamxay Province, Laos',
                location_lo: 'ແຂວງບໍລິຄຳໄຊ, ລາວ',
                scope: 'Road Construction Supervision',
                scope_lo: 'ການກວດກາການກໍ່ສ້າງຖະໜົນ',
                year: '2012-2017',
                duration: 'April 2012 - March 2017 (47 months)',
                duration_lo: 'ເມສາ 2012 - ມີນາ 2017 (47 ເດືອນ)',
                client: 'Department of Public Works and Transport, Bolikhamxay Province',
                client_lo: 'ກົມໂຍທາທິການ ແລະ ຂົນສົ່ງ, ແຂວງບໍລິຄຳໄຊ',
                value: '4,565,382,448 Kip',
                value_lo: '4,565,382,448 ກີບ',
                cover: 'assets/img/projects/national-road-1e-lot1-cover.jpg',
                short_summary: 'Comprehensive construction supervision for a major road infrastructure project.',
                short_summary_lo: 'ການກວດກາການກໍ່ສ້າງແບບຄົບວົງຈອນສຳລັບໂຄງການພື້ນຖານໂຄງລ່າງທາງຫຼວງທີ່ສຳຄັນ.',
                summary: 'TPEC provided comprehensive construction supervision for this major road infrastructure project spanning 47 months. Our team of 8 engineers and 1 team leader delivered construction supervision, materials testing, quality control, and progress reporting for road construction with double surface treatment, ensuring project completion to the highest standards.',
                summary_lo: 'TPEC ໄດ້ໃຫ້ການກວດກາການກໍ່ສ້າງແບບຄົບວົງຈອນສຳລັບໂຄງການພື້ນຖານໂຄງລ່າງທາງຫຼວງທີ່ສຳຄັນນີ້ ເຊິ່ງໃຊ້ເວລາ 47 ເດືອນ. ທີມງານຂອງພວກເຮົາປະກອບດ້ວຍວິສະວະກອນ 8 ຄົນ ແລະ ຫົວໜ້າທີມ 1 ຄົນ ໄດ້ດຳເນີນການກວດກາການກໍ່ສ້າງ, ທົດສອບວັດສະດຸ, ຄວບຄຸມຄຸນນະພາບ ແລະ ລາຍງານຄວາມຄືບໜ້າຂອງການກໍ່ສ້າງຖະໜົນດ້ວຍການປູຢາງສອງຊັ້ນ, ເພື່ອຮັບປະກັນໃຫ້ໂຄງການສຳເລັດຕາມມາດຕະຖານສູງສຸດ.'
            },
            'national-road-1e-lot2': {
                title: 'National Road 1E Construction Project (Lot II)',
                title_lo: 'ໂຄງການກໍ່ສ້າງផ្លូវជាតិເລກທີ 1E (ຕອນທີ II)',
                location: 'Bolikhamxay Province, Laos',
                location_lo: 'ແຂວງບໍລິຄຳໄຊ, ລາວ',
                scope: 'Road Construction Supervision',
                scope_lo: 'ການກວດກາການກໍ່ສ້າງຖະໜົນ',
                year: '2012-2014',
                duration: 'April 2012 - December 2014 (32 months)',
                duration_lo: 'ເມສາ 2012 - ທັນວາ 2014 (32 ເດືອນ)',
                client: 'Department of Public Works and Transport, Bolikhamxay Province',
                client_lo: 'ກົມໂຍທາທິການ ແລະ ຂົນສົ່ງ, ແຂວງບໍລິຄຳໄຊ',
                value: '1,637,511,480 Kip',
                value_lo: '1,637,511,480 ກີບ',
                cover: 'assets/img/projects/national-road-1e-lot2-cover.jpg',
                short_summary: 'A 32-month road construction supervision project.',
                short_summary_lo: 'ໂຄງການກວດກາການກໍ່ສ້າງຖະໜົນ 32 ເດືອນ.',
                summary: 'A 32-month road construction supervision project where TPEC\'s team of 3 engineers and 1 team leader provided construction supervision, materials testing, and quality control for road double surface treatment construction, demonstrating our expertise in large-scale infrastructure projects.',
                summary_lo: 'ໂຄງການກວດກາການກໍ່ສ້າງຖະໜົນ 32 ເດືອນ ເຊິ່ງທີມງານ TPEC ປະກອບດ້ວຍວິສະວະກອນ 3 ຄົນ ແລະ ຫົວໜ້າທີມ 1 ຄົນ ໄດ້ໃຫ້ການກວດກາການກໍ່ສ້າງ, ທົດສອບວັດສະດຸ ແລະ ຄວບຄຸມຄຸນນະພາບສຳລັບການກໍ່ສ້າງຖະໜົນປູຢາງສອງຊັ້ນ, ເຊິ່ງສະແດງໃຫ້ເຫັນເຖິງຄວາມຊ່ຽວຊານຂອງພວກເຮົາໃນໂຄງການພື້ນຖານໂຄງລ່າງຂະໜາດໃຫຍ່.'
            },
            'mekong-bank-protection-paksan': {
                title: 'Mekong River Bank Protection - Paksan District',
                title_lo: 'ການປ້ອງກັນຕາຝັ່ງแม่น้ำຂອງ - ເມືອງປາກຊັນ',
                location: 'Phoxai Village, Paksan District, Borlikhamxay Province',
                location_lo: 'ບ້ານໂພໄຊ, ເມືອງປາກຊັນ, ແຂວງບໍລິຄຳໄຊ',
                scope: 'River Bank Protection Construction',
                scope_lo: 'ການກໍ່ສ້າງການປ້ອງກັນຕາຝັ່ງแม่น้ำ',
                year: '2013-2018',
                duration: 'October 2013 - April 2018 (4.5 years)',
                duration_lo: 'ຕຸລາ 2013 - ເມສາ 2018 (4.5 ປີ)',
                client: 'Department of Public Works and Transport, Borlikhamxay Province',
                client_lo: 'ກົມໂຍທາທິການ ແລະ ຂົນສົ່ງ, ແຂວງບໍລິຄຳໄຊ',
                value: '779,244,886 Kip',
                value_lo: '779,244,886 ກີບ',
                cover: 'assets/img/projects/mekong-bank-protection-cover.jpg',
                short_summary: 'Supervised the construction of 1.52 km of Mekong river bank protection.',
                short_summary_lo: 'ກວດກາການກໍ່ສ້າງການປ້ອງກັນຕາຝັ່ງแม่น้ำຂອງ 1.52 ກິໂລແມັດ.',
                summary: 'TPEC supervised the construction of 1.52 km of Mekong river bank protection in Phoxai Village over 4.5 years. Our team of 2 engineers and 1 team leader ensured proper construction techniques and quality control for this critical flood protection infrastructure project.',
                summary_lo: 'TPEC ໄດ້ກວດກາການກໍ່ສ້າງການປ້ອງກັນຕາຝັ່ງแม่น้ำຂອງ 1.52 ກິໂລແມັດ ຢູ່ບ້ານໂພໄຊ ເປັນເວລາ 4.5 ປີ. ທີມງານຂອງພວກເຮົາປະກອບດ້ວຍວິສະວະກອນ 2 ຄົນ ແລະ ຫົວໜ້າທີມ 1 ຄົນ ໄດ້ຮັບປະກັນເຕັກນິກການກໍ່ສ້າງທີ່ເໝາະສົມ ແລະ ການຄວບຄຸມຄຸນນະພາບສຳລັບໂຄງການພື້ນຖານໂຄງລ່າງປ້ອງກັນນ້ຳຖ້ວມທີ່ສຳຄັນນີ້.'
            },
            'concrete-bridges-road8': {
                title: '4 Concrete Bridges - National Road No. 8',
                title_lo: 'ຂົວຄອນກຣີດ 4 ແຫ່ງ - ផ្លូវជាតិເລກທີ 8',
                location: 'Borlikhamxay Province, Laos',
                location_lo: 'ແຂວງບໍລິຄຳໄຊ, ລາວ',
                scope: 'Bridge Construction Supervision',
                scope_lo: 'ການກວດກາການກໍ່ສ້າງຂົວ',
                year: '2014-2017',
                duration: 'December 2014 - May 2017 (2.5 years)',
                duration_lo: 'ທັນວາ 2014 - ພຶດສະພາ 2017 (2.5 ປີ)',
                client: 'Department of Public Works and Transport, Borlikhamxay Province',
                client_lo: 'ກົມໂຍທາທິການ ແລະ ຂົນສົ່ງ, ແຂວງບໍລິຄຳໄຊ',
                value: '1,050,000,000 Kip',
                value_lo: '1,050,000,000 ກີບ',
                cover: 'assets/img/projects/concrete-bridges-road8-cover.jpg',
                short_summary: 'A comprehensive bridge construction supervision project.',
                short_summary_lo: 'ໂຄງການກວດກາການກໍ່ສ້າງຂົວແບບຄົບວົງຈອນ.',
                summary: 'A comprehensive bridge construction supervision project where TPEC\'s team of 3 engineers and 1 team leader provided technical oversight for the construction of 4 concrete bridges, ensuring structural integrity and compliance with engineering standards over a 2.5-year period.',
                summary_lo: 'ໂຄງການກວດກາການກໍ່ສ້າງຂົວແບບຄົບວົງຈອນ ເຊິ່ງທີມງານ TPEC ປະກອບດ້ວຍວິສະວະກອນ 3 ຄົນ ແລະ ຫົວໜ້າທີມ 1 ຄົນ ໄດ້ໃຫ້ການກວດກາດ້ານເຕັກນິກສຳລັບການກໍ່ສ້າງຂົວຄອນກຣີດ 4 ແຫ່ງ, ເພື່ອຮັບປະກັນຄວາມສົມບູນຂອງໂຄງສ້າງ ແລະ ການປະຕິບັດຕາມມາດຕະຖານວິສະວະກຳຕະຫຼອດໄລຍະເວລາ 2.5 ປີ.'
            },
            'nam-ngeip-hydroelectric': {
                title: 'Nam Ngeip 1 Hydroelectric Project Survey',
                title_lo: 'ການສຳຫຼວດໂຄງການໄຟຟ້ານ້ຳຕົກນ້ຳງຽບ 1',
                location: 'Lao PDR',
                location_lo: 'ສປປ ລາວ',
                scope: 'Topographic Survey for Re-regulation Dam',
                scope_lo: 'ການສຳຫຼວດພູມສັນຖານສຳລັບເຂື່ອນ નિયಂತ್ರణ',
                year: '2013',
                duration: 'March - May 2013 (3 months)',
                duration_lo: 'ມີນາ - ພຶດສະພາ 2013 (3 ເດືອນ)',
                client: 'Obajasih Company (Construction Manager)',
                client_lo: 'ບໍລິສັດ Obajasih (ຜູ້ຈັດການກໍ່ສ້າງ)',
                value: '6,950 USD',
                value_lo: '6,950 ໂດລາສະຫະລັດ',
                funding: 'Japan Funded',
                funding_lo: 'ທຶນຈາກປະເທດຍີ່ປຸ່ນ',
                cover: 'assets/img/projects/nam-ngeip-hydroelectric-cover.jpg',
                short_summary: 'Specialized topographic mapping and leveling survey services for a hydroelectric project.',
                short_summary_lo: 'ການບໍລິການສຳຫຼວດພູມສັນຖານ ແລະ ການສຳຫຼວດລະດັບພິເສດສຳລັບໂຄງການໄຟຟ້ານ້ຳຕົກ.',
                summary: 'TPEC conducted specialized topographic mapping and leveling survey services for this Japan-funded hydroelectric project. Our services included grid 15x15 mapping, river section surveying, and HWL/LWL determination for the re-regulation dam, showcasing our expertise in precision surveying for power infrastructure.',
                summary_lo: 'TPEC ໄດ້ດຳເນີນການບໍລິການສຳຫຼວດພູມສັນຖານ ແລະ ການສຳຫຼວດລະດັບພິເສດສຳລັບໂຄງການໄຟຟ້ານ້ຳຕົກທີ່ໄດ້ຮັບທຶນຈາກປະເທດຍີ່ປຸ່ນນີ້. ການບໍລິການຂອງພວກເຮົາລວມມີການສ້າງແຜນທີ່ຕາຂ່າຍ 15x15, ການສຳຫຼວດພາກສ່ວນแม่น้ำ ແລະ ການກຳນົດ HWL/LWL ສຳລັບເຂື່ອນ નિયಂತ್ರణ, ເຊິ່ງສະແດງໃຫ້ເຫັນເຖິງຄວາມຊ່ຽວຊານຂອງພວກເຮົາໃນການສຳຫຼວດທີ່แม่นยำສຳລັບພື້ນຖານໂຄງລ່າງດ້ານພະລັງງານ.'
            },
            'road-construction-vientiane': {
                title: 'Road Construction Projects - Vientiane Province',
                title_lo: 'ໂຄງການກໍ່ສ້າງຖະໜົນ - ແຂວງວຽງຈັນ',
                location: 'Vientiane Province, Laos',
                location_lo: 'ແຂວງວຽງຈັນ, ລາວ',
                scope: 'Multiple Road Construction and Supervision',
                scope_lo: 'ການກໍ່ສ້າງ ແລະ ກວດກາຖະໜົນຫຼາຍສາຍ',
                year: '2013-2016',
                duration: 'March 2013 - September 2016 (3.5 years)',
                duration_lo: 'ມີນາ 2013 - ກັນຍາ 2016 (3.5 ປີ)',
                client: 'Department of Public Works and Transport, Vientiane Province',
                client_lo: 'ກົມໂຍທາທິການ ແລະ ຂົນສົ່ງ, ແຂວງວຽງຈັນ',
                value: '2,506,501,727 Kip',
                value_lo: '2,506,501,727 ກີບ',
                cover: 'assets/img/projects/road-construction-vientiane-cover.jpg',
                short_summary: 'Managed multiple road construction and supervision projects across Vientiane Province.',
                short_summary_lo: 'ຄຸ້ມຄອງໂຄງການກໍ່ສ້າງ ແລະ ກວດກາຖະໜົນຫຼາຍສາຍທົ່ວແຂວງວຽງຈັນ.',
                summary: 'TPEC managed multiple road construction and supervision projects across Vientiane Province, including double bitumen surface treatment construction. Our team of 3 engineers and 1 team leader delivered comprehensive project management and quality control services over a 3-year period.',
                summary_lo: 'TPEC ໄດ້ຄຸ້ມຄອງໂຄງການກໍ່ສ້າງ ແລະ ກວດກາຖະໜົນຫຼາຍສາຍທົ່ວແຂວງວຽງຈັນ, ລວມທັງການກໍ່ສ້າງປູຢາງສອງຊັ້ນ. ທີມງານຂອງພວກເຮົາປະກອບດ້ວຍວິສະວະກອນ 3 ຄົນ ແລະ ຫົວໜ້າທີມ 1 ຄົນ ໄດ້ໃຫ້ບໍລິການຄຸ້ມຄອງໂຄງການ ແລະ ຄວບຄຸມຄຸນນະພາບແບບຄົບວົງຈອນຕະຫຼອດໄລຍະເວລາ 3 ປີ.'
            }
        };

        function showProjectModal(projectSlug) {
            const project = projectsData[projectSlug];
            if (!project || !projectModal) {
                console.warn('❌ Project not found or modal not available:', projectSlug);
                return;
            }

            const lang = i18n.getCurrentLang();
            const getTranslated = (key) => {
                const loKey = `${key}_lo`;
                return lang === 'lo' && project[loKey] ? project[loKey] : project[key];
            };

            const title = getTranslated('title');
            console.log('📋 Showing modal for:', title);

            // Create modal content
            const modalBody = projectModal.querySelector('.project-modal-body');
            if (modalBody) {
                modalBody.innerHTML = `
                    <div class="project-modal-header">
                        <h2 class="project-modal-title" id="project-modal-title">${title}</h2>
                        <div class="project-modal-meta">
                            <span class="project-location">📍 ${getTranslated('location')}</span>
                            <span class="project-year">📅 ${project.year}</span>
                            <span class="project-value">💰 ${getTranslated('value')}</span>
                            ${getTranslated('funding') ? `<span class="project-funding">🏦 ${getTranslated('funding')}</span>` : ''}
                        </div>
                    </div>
                    <div class="project-modal-content">
                        <div class="project-image">
                            <img src="${project.cover}" alt="${title}" loading="lazy">
                        </div>
                        <div class="project-details">
                            <h3>Project Scope</h3>
                            <p>${getTranslated('scope')}</p>
                            <h3>Client</h3>
                            <p>${getTranslated('client')}</p>
                            <h3>Summary</h3>
                            <p>${getTranslated('summary')}</p>
                        </div>
                    </div>
                `;
            }

            // Show modal
            projectModal.classList.remove('hidden');
            projectModal.setAttribute('aria-hidden', 'false');

            // Add visible class for animation
            setTimeout(() => {
                projectModal.classList.add('visible');
            }, 10);

            // Focus management
            const closeBtn = projectModal.querySelector('.project-modal-close');
            if (closeBtn) {
                closeBtn.focus();
            }

            // Prevent body scroll
            document.body.style.overflow = 'hidden';
        }
        function closeProjectModal() {
            if (!projectModal) return;

            console.log('🔒 Closing project modal');

            // Remove visible class
            projectModal.classList.remove('visible');

            // Hide modal after animation
            setTimeout(() => {
                projectModal.classList.add('hidden');
                projectModal.setAttribute('aria-hidden', 'true');
            }, 300);

            // Restore body scroll
            document.body.style.overflow = '';
        }
    </script>
</body>
</html>
